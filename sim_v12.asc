Version 4
SHEET 1 4688 1864
WIRE 960 -16 752 -16
WIRE 1200 -16 960 -16
WIRE 1312 -16 1200 -16
WIRE 1488 -16 1312 -16
WIRE 1648 -16 1584 -16
WIRE 1792 -16 1648 -16
WIRE 1920 -16 1792 -16
WIRE 2048 -16 2000 -16
WIRE 2160 -16 2128 -16
WIRE 2352 -16 2160 -16
WIRE 2512 -16 2352 -16
WIRE 752 16 752 -16
WIRE 960 16 960 -16
WIRE 1200 16 1200 -16
WIRE 2352 64 2352 -16
WIRE 2512 96 2512 -16
WIRE 1568 112 1568 32
WIRE 128 144 0 144
WIRE 752 144 752 80
WIRE 752 144 208 144
WIRE 1792 176 1792 -16
WIRE 2160 176 2160 -16
WIRE 1312 224 1312 -16
WIRE 2512 240 2512 176
WIRE 2720 240 2512 240
WIRE 0 256 0 144
WIRE 128 256 0 256
WIRE 960 256 960 80
WIRE 960 256 208 256
WIRE 2352 272 2352 144
WIRE 2512 320 2512 240
WIRE 0 368 0 256
WIRE 128 368 0 368
WIRE 1200 368 1200 80
WIRE 1200 368 208 368
WIRE 2352 384 2352 352
WIRE 752 416 752 144
WIRE 960 416 960 256
WIRE 1200 416 1200 368
WIRE 752 544 752 480
WIRE 960 544 960 480
WIRE 960 544 752 544
WIRE 1200 544 1200 480
WIRE 1200 544 960 544
WIRE 1312 544 1312 288
WIRE 1312 544 1200 544
WIRE 1440 544 1312 544
WIRE 1792 544 1792 240
WIRE 1792 544 1440 544
WIRE 1952 544 1792 544
WIRE 2160 544 2160 240
WIRE 2160 544 2032 544
WIRE 2352 544 2352 464
WIRE 2352 544 2160 544
WIRE 2512 544 2512 400
WIRE 1440 560 1440 544
WIRE 2160 592 2160 544
WIRE 2160 688 2160 672
WIRE 2480 688 2160 688
WIRE 2160 720 2160 688
WIRE 560 800 560 784
WIRE 2160 816 2160 784
WIRE 2752 1056 2320 1056
WIRE 3040 1072 3024 1072
WIRE 2032 1088 1696 1088
WIRE 3136 1088 3104 1088
WIRE 2752 1104 2752 1056
WIRE 2768 1104 2752 1104
WIRE 3040 1104 2848 1104
WIRE 1696 1120 1696 1088
WIRE 2480 1120 2480 688
WIRE 2480 1120 2320 1120
WIRE 2480 1184 2320 1184
WIRE 2576 1184 2560 1184
WIRE 1696 1216 1696 1200
WIRE 2032 1216 1696 1216
WIRE 2576 1216 2576 1184
WIRE 2720 1216 2720 240
WIRE 2720 1216 2576 1216
WIRE 2576 1248 2576 1216
WIRE 2576 1248 2320 1248
WIRE 1696 1264 1696 1216
WIRE 2176 1312 2176 1296
WIRE 1696 1376 1696 1328
FLAG 880 704 5v
FLAG 880 784 0
FLAG 768 784 0
FLAG 768 704 15v
FLAG 672 704 15v2
FLAG 3072 1056 15v2
FLAG 1648 -16 source
FLAG 3072 1120 source
FLAG 3216 1088 gate
FLAG 3024 1072 0
FLAG 672 784 source
FLAG 1696 1376 0
FLAG 560 800 0
FLAG 560 704 18v
FLAG 2176 1008 18v
FLAG 2176 1312 0
FLAG 2512 544 0
FLAG 2160 816 0
FLAG 1568 112 gate
FLAG 1440 560 0
SYMBOL voltage 224 144 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 325 50 0 0 0 0)
SYMBOL voltage 224 256 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 325 50 0 0 120 0)
SYMBOL voltage 224 368 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0 325 50 0 0 240 0)
SYMBOL ind 1904 0 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 1.08m
SYMBOL cap 2144 176 R0
SYMATTR InstName C1
SYMATTR Value 600µ
SYMBOL res 2336 48 R0
SYMATTR InstName R1
SYMATTR Value 20
SYMBOL diode 1808 240 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMATTR Value VS-E5TH1512
SYMBOL nmos 1488 32 R270
SYMATTR InstName M1
SYMATTR Value IPB65R420CFD
SYMBOL OpAmps\\opamp2 3072 1024 R0
SYMATTR InstName U1
SYMATTR Value TLP250
SYMBOL diode 768 80 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMATTR Value VS-E5TH1512
SYMBOL diode 976 80 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value VS-E5TH1512
SYMBOL diode 1216 80 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value VS-E5TH1512
SYMBOL diode 768 480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value VS-E5TH1512
SYMBOL diode 976 480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value VS-E5TH1512
SYMBOL diode 1216 480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value VS-E5TH1512
SYMBOL cap 1296 224 R0
SYMATTR InstName C2
SYMATTR Value 10m
SYMBOL res 2144 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 0.2
SYMBOL voltage 768 688 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 15
SYMBOL res 2496 80 R0
SYMATTR InstName R7
SYMATTR Value 390k
SYMBOL res 2496 304 R0
SYMATTR InstName R8
SYMATTR Value 5.6k
SYMBOL voltage 880 688 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V5
SYMATTR Value 5
SYMBOL voltage 672 688 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 15
SYMBOL res 3232 1072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10
SYMBOL PowerProducts\\LT1246 2176 1152 R0
SYMATTR InstName U3
SYMBOL res 1680 1104 R0
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL cap 1680 1264 R0
SYMATTR InstName C5
SYMATTR Value 3.3n
SYMBOL voltage 560 688 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 18V
SYMBOL res 2576 1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 47k
SYMBOL res 2048 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 0.05
SYMBOL res 2144 576 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL cap 2144 720 R0
SYMATTR InstName C3
SYMATTR Value 470p
SYMBOL res 2864 1088 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 2336 256 R0
SYMATTR InstName R5
SYMATTR Value 1.07
SYMBOL ind 2336 368 R0
SYMATTR InstName L2
SYMATTR Value 24.5m
TEXT -16 560 Left 2 !.tran 0 10m 0 100n uic
TEXT 3040 -32 Left 2 !.SUBCKT TLP250 A K VCC EE VO\n* Toshiba TLP250 Behavioral Model\n* Pinout: A=Anode(2), K=Cathode(3), VCC=Supply(8), EE=GND(5), VO=Output(6/7)\n* Input LED Stage\nR1 A 2 1k\nD1 2 K DLED\n.MODEL DLED D(Is=1e-15 N=1 Rs=5)\n* Current Sensing\nE_sense 3_dum 0 VALUE={I(D1)}\n* Output Switch Stage with Delay (Approx 150ns-500ns)\nB_out VO_int 0 V = V(3_dum)>1m ? V(VCC) : V(EE)\nR_out VO_int VO 10   ; Output Impedance approx 10 ohms\nC_delay VO_int 0 200p ; Simulation of delay\n* Power consumption dummy\nR_supply VCC EE 10Meg\n.ENDS TLP250
